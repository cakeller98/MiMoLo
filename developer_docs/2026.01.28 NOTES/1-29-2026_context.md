> [!NOTE]
> Reference-History Document: workflow intent from this file is merged into `developer_docs/2026.02.05 NOTES/UNIFIED_WORKFLOW_INTENT.md`.
> Use that file for current workflow direction; keep this file for historical context.

# 1-29-2026 Context

## Snapshot (what’s in place)
- Agent JLP: agents communicate with Operations (orchestrator) via JSON Lines on stdin/stdout.
- IPC/UDS: reserved for Control <-> Operations.
- Terminology map: Field-Agent -> Agent, Reporter/Exporter -> Reporter, Vault manager -> Archivist, Zipper for compression utilities. One-word roles preferred.
- MIMOLO data root is centralized: `mimolo/common/paths.py` provides `get_mimolo_data_dir()` for OS-appropriate data root.
- NOTE: Since this note was drafted, `field_agents` paths were renamed to `agents` in the repo (breaking path change).
- Agent spawn injects env vars:
  - `MIMOLO_AGENT_LABEL` (registered label from config)
  - `MIMOLO_AGENT_ID` (per-instance id)
  - `MIMOLO_DATA_DIR` (data root)
- BaseAgent handles protocol obligations (sequence, stop/flush ACKs, summaries). Shutdown logs include label/id/pid.
- Agent template follows hook pattern: only overrides accumulation/snapshot/summary, uses `super()` for metrics.
  - Added optional `--dev-pretty` to mirror JSON to stderr.
- Agent example now prints stop message with agent id.
- Runtime shutdown: per-agent deadlines reset on ack/summary/log/heartbeat/status; logs `shutdown_timeout` if any miss.
- Orchestrator logs: `[grey70][label][/grey70]` prefix for agent logs.
- `shutdown_all()` only sends shutdown to alive agents (avoids extra warnings).
- Stderr tail logs now go under OS-appropriate data root `mimolo/logs` (previously temp).

## Known issues / clarifications
- The “Waiting for Field-Agent processes to exit…” message now prints before SEQUENCE send to avoid confusing ordering.
- JSONL blurbs in console when running agent directly are expected (stdout is protocol). Pretty stderr output is optional.
- Code uses `agent` identifiers internally; any remaining `field_agent` mentions should be treated as historical/rename context.

## Docs status
- Docs terminology sweep done: “Field-Agent” removed, “Agent” used; deprecated terms noted in key docs.
- Added `developer_docs/TERMINOLOGY_MAP.md` for mapping old -> new names.
- Added note in `developer_docs/2026.01.28 NOTES/2026-01-29_status.md` about Codex pycache permission quirk.

## What to work on next (recommended)
1) IPC naming cleanup note: clarify IPC umbrella vs AF_UNIX IPC vs Agent JLP (tracked in notes).
2) Finish BaseAgent docstring polish per policy (self-contained docs, minimal external refs).
3) Confirm shutdown flow: consider configurable per-agent shutdown timeout in config.
4) Align control specs with “Agent/Reporter/Archivist/Vault” terminology and update any remaining “exporter” mentions (already cleaned in notes).
5) Decide on Vault naming in UI/docs (Vault vs logs) and document data retention policy.

## Important paths
- Shared data root: `mimolo/common/paths.py`
- Agent base: `mimolo/agents/base_agent.py`
- Agent template: `mimolo/agents/agent_template/agent_template.py`
- Runtime: `mimolo/core/runtime.py`
- Terminology map: `developer_docs/TERMINOLOGY_MAP.md`

## Notes on environment
- Codex sandbox blocks writing `__pycache__` in repo; use `PYTHONPYCACHEPREFIX=$env:TEMP` for syntax checks.
